import{d as U,i as s,f as A,j as w,k as Z,r as m,l as ee,o as M,g as J,w as l,b as a,a as o,m as r,n as ae,T as Y,q as te,c as B,s as H,u as oe,t as le,p as F,e as j,_ as q,A as se,h as ne}from"./index-10dd36ad.js";import{S as ie}from"./SideBar-1ff88441.js";const C=i=>(F("data-v-d0939e29"),i=i(),j(),i),de={class:"feedbackModal-inputs"},ce={class:"feedbackModal-inputs-gender"},ue={key:0},re={class:"feedbackModal-inputs-home"},me=C(()=>o("h4",{class:"feedbackModal-inputs-subtitle"}," Относитесь ли вы к категории: ",-1)),pe={class:"feedbackModal-checkboxList-block"},_e={class:"feedbackModal-checkboxList"},he={class:"feedbackModal-checkboxList"},ve={class:"feedbackModal-checkboxList"},fe=C(()=>o("a",{href:"/doc/ru/Устав_проект_новой_редакции_устав_в_новой_редакции_29_07_2023.pdf",target:"_blank"},"Уставом",-1)),be=C(()=>o("a",{href:"/doc/ru/Программа партии_.pdf",target:"_blank"},"Программой политической партии",-1)),ge=U({__name:"createPartyModal",props:{show:{type:Boolean}},emits:["hide","finish"],setup(i,{emit:h}){const{toast:u}=oe(),v=i,f=h,_=s(!1),b=s("female"),z=localStorage.getItem("TOKEN"),S=s([]),x=s([]),g=s(null),L=s(null),k=s(!1),T=s([]),D=s(),$=s(!0),E=s(null),P=s([]);A(()=>{w({method:"get",url:"https://api.respublica.codetau.com/api/v1/parties/locations?offset=0&limit=100"}).then(e=>{e.data.forEach(t=>{S.value.push({label:t.name,value:t.id.toString(),childrens:t.childrens})})}).catch(e=>{console.log("err",e),u({message:"Возникли ошибки при запросе"})}),O(),R()});const O=()=>{w({method:"get",url:"https://api.respublica.codetau.com/api/v1/admin/users?offset=0&limit=100"}).then(e=>{e.data.forEach(t=>{T.value.push({label:`${t.first_name} ${t.last_name} ${t.middle_name??""}`,value:JSON.stringify(t)})})}).catch(e=>{console.log("err",e),u({message:"Возникли ошибки при запросе"})})},R=()=>{w({method:"get",url:"https://api.respublica.codetau.com/api/v1/admin/parties/memberships/reserved-ticket-numbers?offset=0&limit=100"}).then(e=>{e.data.forEach(t=>{P.value.push({label:t.ticket_number,value:t.id.toString()})})}).catch(e=>{console.log("err",e),u({message:"Возникли ошибки при запросе"})})};Z(()=>g.value,()=>{x.value=[],L.value=null,k.value=!1,S.value.forEach(d=>{Number(d.value)===Number(g.value)&&(d.childrens.length||(k.value=!0),d.childrens.forEach(e=>{x.value.push({label:e.name,value:e.id.toString()})}))})});const G=({education:d,specialization:e,workPlace:t,post:c,streat:p,home:y,apartment:V,dateBirthday:I,pensioner:N,disabled:n,unemployed:W,onChildcareLeave:Q})=>{const X={birth_date:le(I).format("YYYY-MM-DD"),gender:b.value,education:d,specialty:e.length?e:null,workplace:t.length?t:null,position:c.length?c:null,location_id:Number(L.value??g.value),street:p,house:y,apartment:V===""?null:V,is_pensioner:N,is_disabled:n,is_unemployed:W,is_on_childcare_leave:Q};K(X)},K=d=>{_.value=!0,w({method:"post",url:"https://api.respublica.codetau.com/api/v1/parties/memberships",data:d,headers:{accept:"application/json",Authorization:"Bearer "+z}}).then(t=>{console.log("response",t),u({message:"Вы успешно вступили в партию",type:"success"}),f("finish"),setTimeout(()=>{f("hide")},300),_.value=!1}).catch(t=>{t.response.data.detail==="Duplicate membership is not allowed."?u({message:"Возникли ошибки при запросе"}):t.response.data.detail==="Age under 18 is not allowed."?u({message:"Проживание в возрасте до 18 лет не допускается"}):u({message:"Возникли ошибки при запросе"}),console.log("err",t),_.value=!1})};return(d,e)=>{const t=m("Select"),c=m("Checkbox"),p=m("Input"),y=m("Button"),V=m("Form"),I=m("Modal"),N=ee("collapse");return v.show?(M(),J(I,{key:0,onHide:e[7]||(e[7]=n=>f("hide")),class:"feedbackModal",title:"Вступить в партию"},{default:l(()=>[a(V,{onFinish:G,ignores:k.value?["locality"]:null},{default:l(()=>[o("div",de,[a(t,{name:"user-data",placeholder:"Выберите пользователя*",options:T.value,modelValue:D.value,"onUpdate:modelValue":e[0]||(e[0]=n=>D.value=n),required:""},null,8,["options","modelValue"]),a(c,{name:"confirm-3",class:"feedbackModal-inputs-customTicketNum",modelValue:$.value,"onUpdate:modelValue":e[1]||(e[1]=n=>$.value=n)},{default:l(()=>[r(" Автоматическая генерация номера ")]),_:1},8,["modelValue"]),o("div",{class:ae(["feedbackModal-inputs-ticketNumSelect",{disabled:$.value}])},[a(t,{name:"ticket-num",placeholder:"Укажите номер билета*",options:P.value,modelValue:E.value,"onUpdate:modelValue":e[2]||(e[2]=n=>E.value=n),required:""},null,8,["options","modelValue"])],2),o("div",ce,[a(p,{type:"date",name:"dateBirthday",placeholder:"Дата рождения*",required:""}),a(y,{name:"Женщина",type:b.value==="female"?"default-blue":"outline-grey",onClick:e[3]||(e[3]=()=>b.value="female")},null,8,["type"]),a(y,{name:"Мужчина",type:b.value==="male"?"default-blue":"outline-grey",onClick:e[4]||(e[4]=()=>b.value="male")},null,8,["type"])]),a(t,{name:"education",placeholder:"Укажите ваше образование*",options:[{label:"Высшее",value:"higher_education"},{label:"Среднее",value:"secondary_special_education"}],required:""}),a(p,{name:"specialization",placeholder:"Специальность"}),a(p,{name:"workPlace",placeholder:"Место работы"}),a(p,{name:"post",placeholder:"Должность"}),a(t,{name:"region",placeholder:"Укажите область*",options:S.value,modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=n=>g.value=n),required:""},null,8,["options","modelValue"]),a(Y,null,{default:l(()=>[k.value?H("",!0):te((M(),B("div",ue,[a(t,{name:"locality",placeholder:"Населенный пункт*",options:x.value.length?x.value:[{label:"Сначало выберите область",value:null}],modelValue:L.value,"onUpdate:modelValue":e[6]||(e[6]=n=>L.value=n),required:""},null,8,["options","modelValue"])])),[[N]])]),_:1}),o("div",re,[a(p,{name:"streat",placeholder:"Улица/Проспект/Мкр*",required:""}),a(p,{name:"home",placeholder:"Дом*",required:""}),a(p,{name:"apartment",placeholder:"Кв."})]),o("div",null,[me,o("div",pe,[o("div",_e,[a(c,{name:"pensioner",class:"feedbackModal-checkboxList-item"},{default:l(()=>[r(" Пенсионеры ")]),_:1}),a(c,{name:"disabled",class:"feedbackModal-checkboxList-item"},{default:l(()=>[r(" Инвалиды ")]),_:1})]),o("div",he,[a(c,{name:"unemployed",class:"feedbackModal-checkboxList-item"},{default:l(()=>[r(" Безработные ")]),_:1}),a(c,{name:"onChildcareLeave",class:"feedbackModal-checkboxList-item"},{default:l(()=>[r(" Находящиеся в отпуске по уходу за детьми ")]),_:1})])])])]),o("div",ve,[a(c,{name:"confirm-1",class:"feedbackModal-checkboxList-item",required:""},{default:l(()=>[r(" С "),fe,r(" и "),be,r(" ознакомлен(а), поддерживаю их и обязуюсь выполнять. ")]),_:1}),a(c,{name:"confirm-2",class:"feedbackModal-checkboxList-item",required:""},{default:l(()=>[r(" Продолжая, Вы выражаете согласие на сбор и обработку своих персональных данных не противоречащими законодательству Республики Казахстан способами, как на бумажных носителях, так и в электронном формате, в той мере, насколько это необходимо. ")]),_:1}),a(c,{name:"confirm-3",class:"feedbackModal-checkboxList-item",required:""},{default:l(()=>[r(" Подтверждаю, что не являюсь членом другой политической партии ")]),_:1})]),a(y,{name:"Отправить заявку",loading:_.value,htmlType:"submit",ignoreValidate:k.value?["locality"]:null},null,8,["loading","ignoreValidate"])]),_:1},8,["ignores"])]),_:1})):H("",!0)}}});const ke=q(ge,[["__scopeId","data-v-d0939e29"]]),ye=i=>(F("data-v-400db317"),i=i(),j(),i),Me={class:"header"},xe={class:"header-main",id:"header-main"},Le={class:"wrapper"},Ve={class:"header-main-inner"},we={class:"header-main-right"},Se=ye(()=>o("button",{class:"header-main-lang"},[o("span",null,"РУ")],-1)),$e=U({__name:"HeaderManager",setup(i){const h=s(!1);return(u,v)=>{const f=m("SvgIcon"),_=m("RouterLink"),b=m("Button");return M(),B("header",Me,[o("div",xe,[o("div",Le,[o("div",Ve,[a(_,{to:"/",class:"header-main-logo"},{default:l(()=>[a(f,{class:"logo-big",name:"logo",viewboxWidth:260,viewboxHeight:49})]),_:1}),o("div",we,[o("button",{onClick:v[0]||(v[0]=()=>h.value=!0),class:"header-main-logo"},[a(b,{name:"Создать члена партии",type:"default-blue"})]),Se,a(se)])])])]),a(ke,{show:h.value,onHide:v[1]||(v[1]=()=>h.value=!1)},null,8,["show"])])}}});const Ie=q($e,[["__scopeId","data-v-400db317"]]);const Ne={class:"layout"},Be={class:"layout-inner"},qe={class:"layout-content",id:"layout-content"},Ce={__name:"MainLayoutManager",setup(i){A(()=>{document.body.style="height:100vh;overflow:hidden;"});const h=[{title:"Члены партии",link:"/manager/party-list/active"},{title:"Заявки на удаление",link:"/manager/party-resignation-list"},{title:"Удаленные",link:"/manager/party-list/revoked"},{title:"VIP номера",link:"/manager/ticket-num-data-list"}];return(u,v)=>{const f=m("router-view");return M(),B("div",Ne,[a(Ie),o("div",Be,[a(ie,{list:h}),o("div",qe,[a(f,null,{default:l(({Component:_})=>[a(Y,{mode:"out-in"},{default:l(()=>[(M(),J(ne(_),{key:u.$route.path}))]),_:2},1024)]),_:1})])])])}}},Ee=q(Ce,[["__scopeId","data-v-714c68fa"]]);export{Ee as default};
