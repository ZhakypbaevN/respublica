import{d as U,u as z,h as n,j as X,r as c,k as Z,o as $,e as A,w as r,b as a,a as o,l as k,t as _,n as x,T as Y,m as ee,c as q,p as P,q as ae,s as te,i as le,_ as I,A as oe,g as se,f as ne}from"./index-0a4243fa.js";import{S as ie}from"./SideBar-4e184e03.js";const de={class:"feedbackModal-inputs"},ue={class:"feedbackModal-inputs-gender"},re={key:0},ce={class:"feedbackModal-inputs-home"},pe={class:"feedbackModal-inputs-subtitle"},me={class:"feedbackModal-checkboxList-block"},he={class:"feedbackModal-checkboxList"},ve={class:"feedbackModal-checkboxList"},fe=U({__name:"CreatePartyModal",props:{show:{type:Boolean}},emits:["hide","finish"],setup(C,{emit:d}){const{t:l}=z(),{toast:u}=le(),M=C,v=d,m=n(!1),f=n("female"),E=localStorage.getItem("access_token"),D=n([]),w=n([]),g=n(null),L=n(null),b=n(!1),F=n([]),T=n(),B=n(!0),H=n(null),J=n([]),j=[{label:l("social-status.self-employed-persons-with-disabilities"),value:l("social-status.self-employed-persons-with-disabilities")},{label:l("social-status.student"),value:l("social-status.student")},{label:l("social-status.persons-on-parental-leave"),value:l("social-status.persons-on-parental-leave")},{label:l("social-status.pensioners"),value:l("social-status.pensioners")},{label:l("social-status.unemployed"),value:l("social-status.unemployed")},{label:l("social-status.working"),value:l("social-status.working")},{label:l("social-status.large-families"),value:l("social-status.large-families")}];X(()=>g.value,()=>{w.value=[],L.value=null,b.value=!1,D.value.forEach(e=>{Number(e.value)===Number(g.value)&&(e.childrens.length||(b.value=!0),e.childrens.forEach(t=>{w.value.push({label:t.name,value:t.id.toString()})}))})});const R=({education:e,specialization:t,workPlace:s,post:h,streat:p,home:y,apartment:V,dateBirthday:S,pensioner:N,disabled:i,unemployed:W,onChildcareLeave:K,socialStatus:O})=>{const Q={birth_date:ae(S).format("YYYY-MM-DD"),gender:f.value,education:e,specialty:t.length?t:null,workplace:s.length?s:null,position:h.length?h:null,social_status:O,location_id:Number(L.value??g.value),street:p,house:y,apartment:V===""?null:V,is_pensioner:N,is_disabled:i,is_unemployed:W,is_on_childcare_leave:K};G(Q)},G=e=>{m.value=!0,te({method:"post",url:"https://api.respublica-partiyasy.kz/api/v1/parties/memberships",data:e,headers:{accept:"application/json",Authorization:"Bearer "+E}}).then(s=>{console.log("response",s),u({message:"Вы успешно создали партиица",type:"success"}),v("finish"),setTimeout(()=>{v("hide")},300),m.value=!1}).catch(s=>{s.response.data.detail==="Duplicate membership is not allowed."?u({message:"Возникли ошибки при запросе"}):s.response.data.detail==="Age under 18 is not allowed."?u({message:"Проживание в возрасте до 18 лет не допускается"}):u({message:"Возникли ошибки при запросе"}),console.log("err",s),m.value=!1})};return(e,t)=>{const s=c("Select"),h=c("Checkbox"),p=c("Input"),y=c("Button"),V=c("Form"),S=c("Modal"),N=Z("collapse");return M.show?($(),A(S,{key:0,onHide:t[7]||(t[7]=i=>v("hide")),class:"feedbackModal",title:e.$t("party.creating-a-party-ticket")},{default:r(()=>[a(V,{onFinish:R,ignores:b.value?["locality"]:null},{default:r(()=>[o("div",de,[a(s,{name:"user-data",placeholder:e.$t("formdata.select-a-user"),options:F.value,modelValue:T.value,"onUpdate:modelValue":t[0]||(t[0]=i=>T.value=i),required:""},null,8,["placeholder","options","modelValue"]),a(h,{name:"confirm-3",class:"feedbackModal-inputs-customTicketNum",modelValue:B.value,"onUpdate:modelValue":t[1]||(t[1]=i=>B.value=i)},{default:r(()=>[k(_(e.$t("party.automatic-number-generation")),1)]),_:1},8,["modelValue"]),o("div",{class:x(["feedbackModal-inputs-ticketNumSelect",{disabled:B.value}])},[a(s,{name:"ticket-num",placeholder:e.$t("formdata.specify-the-ticket-number"),options:J.value,modelValue:H.value,"onUpdate:modelValue":t[2]||(t[2]=i=>H.value=i),required:""},null,8,["placeholder","options","modelValue"])],2),o("div",ue,[a(p,{type:"date",name:"dateBirthday",placeholder:e.$t("formdata.date-of-birth"),required:""},null,8,["placeholder"]),a(y,{name:e.$t("status.female"),type:f.value==="female"?"default-blue":"outline-grey",onClick:t[3]||(t[3]=()=>f.value="female")},null,8,["name","type"]),a(y,{name:e.$t("status.male"),type:f.value==="male"?"default-blue":"outline-grey",onClick:t[4]||(t[4]=()=>f.value="male")},null,8,["name","type"])]),a(s,{name:"socialStatus",placeholder:e.$t("formdata.social-status"),options:j,required:""},null,8,["placeholder"]),a(s,{name:"education",placeholder:e.$t("formdata.specify-the-education"),options:[{label:e.$t("status.higher"),value:"higher_education"},{label:e.$t("status.average"),value:"secondary_special_education"}],required:""},null,8,["placeholder","options"]),a(p,{name:"specialization",placeholder:e.$t("formdata.specialization")},null,8,["placeholder"]),a(p,{name:"workPlace",placeholder:e.$t("formdata.place-of-work")},null,8,["placeholder"]),a(p,{name:"post",placeholder:e.$t("formdata.post")},null,8,["placeholder"]),a(s,{name:"region",placeholder:e.$t("formdata.specify-the-area"),options:D.value,modelValue:g.value,"onUpdate:modelValue":t[5]||(t[5]=i=>g.value=i),required:""},null,8,["placeholder","options","modelValue"]),a(Y,null,{default:r(()=>[b.value?P("",!0):ee(($(),q("div",re,[a(s,{name:"locality",placeholder:e.$t("formdata.locality"),options:w.value.length?w.value:[{label:e.$t("status.first-select-an-area"),value:null}],modelValue:L.value,"onUpdate:modelValue":t[6]||(t[6]=i=>L.value=i),required:""},null,8,["placeholder","options","modelValue"])])),[[N]])]),_:1}),o("div",ce,[a(p,{name:"streat",placeholder:e.$t("formdata.street-prospect-mkr")},null,8,["placeholder"]),a(p,{name:"home",placeholder:e.$t("formdata.house")},null,8,["placeholder"]),a(p,{name:"apartment",placeholder:e.$t("formdata.sq")},null,8,["placeholder"])]),o("div",null,[o("h4",pe,_(e.$t("formdata.do-you-belong-to-the-category")),1),o("div",me,[o("div",he,[a(h,{name:"pensioner",class:"feedbackModal-checkboxList-item"},{default:r(()=>[k(_(e.$t("social-category.pensioners")),1)]),_:1}),a(h,{name:"disabled",class:"feedbackModal-checkboxList-item"},{default:r(()=>[k(_(e.$t("social-category.disabled")),1)]),_:1})]),o("div",ve,[a(h,{name:"unemployed",class:"feedbackModal-checkboxList-item"},{default:r(()=>[k(_(e.$t("social-category.unemployed")),1)]),_:1}),a(h,{name:"onChildcareLeave",class:"feedbackModal-checkboxList-item"},{default:r(()=>[k(_(e.$t("social-category.on-childcare-leave")),1)]),_:1})])])])]),a(y,{name:e.$t("button.send-a-request"),loading:m.value,htmlType:"submit",ignoreValidate:b.value?["locality"]:null},null,8,["name","loading","ignoreValidate"])]),_:1},8,["ignores"])]),_:1},8,["title"])):P("",!0)}}});const _e=I(fe,[["__scopeId","data-v-3974567e"]]),ge={class:"header"},be={class:"header-main",id:"header-main"},ye={class:"wrapper"},ke={class:"header-main-inner"},$e={class:"header-main-right"},Me=U({__name:"HeaderManager",setup(C){const d=n(!1);return(l,u)=>{const M=c("SvgIcon"),v=c("RouterLink"),m=c("Button"),f=c("LangToggle");return $(),q("header",ge,[o("div",be,[o("div",ye,[o("div",ke,[a(v,{to:"/",class:"header-main-logo"},{default:r(()=>[a(M,{class:"logo-big",name:"logo",viewboxWidth:260,viewboxHeight:49})]),_:1}),o("div",$e,[o("button",{onClick:u[0]||(u[0]=()=>d.value=!0),class:"header-main-logo"},[a(m,{name:"Создать члена партии",type:"default-blue"})]),a(f),a(oe)])])])]),a(_e,{show:d.value,onHide:u[1]||(u[1]=()=>d.value=!1)},null,8,["show"])])}}});const we=I(Me,[["__scopeId","data-v-dbde8ff9"]]);const Le={class:"layout"},Ve={class:"layout-inner"},Ce={class:"layout-content",id:"layout-content"},Be={__name:"MainLayoutManager",setup(C){const{t:d}=z();se(()=>{document.body.style="height:100vh;overflow:hidden;"});const l=[{title:d("page.party-members"),link:"/manager/party-list/active?offset=0&limit=20&published=true&search="},{title:d("page.requests-for-deletion"),link:"/manager/party-resignation-list?offset=0&limit=20&published=true&search="},{title:d("page.deleted"),link:"/manager/party-list/revoked?offset=0&limit=20&published=true&search="},{title:d("page.vip-rooms"),link:"/manager/ticket-num-data-list?offset=0&limit=20&published=true&search="},{title:d("page.analytics"),link:"/manager/analytics"}];return(u,M)=>{const v=c("router-view");return $(),q("div",Le,[a(we),o("div",Ve,[a(ie,{list:l}),o("div",Ce,[a(v,null,{default:r(({Component:m})=>[a(Y,{mode:"out-in"},{default:r(()=>[($(),A(ne(m),{key:u.$route.path}))]),_:2},1024)]),_:1})])])])}}},qe=I(Be,[["__scopeId","data-v-dcd0a7b2"]]);export{qe as default};
