import{d as Y,u as H,h as n,g as z,j as D,k as Z,r,l as x,o as k,e as E,w as d,b as a,a as s,T as j,m as ee,c as q,n as T,t as y,p as C,q as P,i as ae,_ as N,P as te,f as le}from"./index-b097abbd.js";import{S as oe}from"./SideBar-9e69b97c.js";const se={class:"feedbackModal-inputs"},ne={class:"feedbackModal-inputs-gender"},ie={key:0},re={class:"feedbackModal-inputs-home"},de={class:"feedbackModal-inputs-subtitle"},ce={class:"feedbackModal-checkboxList-block"},ue={class:"feedbackModal-checkboxList"},pe={class:"feedbackModal-checkboxList"},me=Y({__name:"CreatePartyModal",props:{show:{type:Boolean}},emits:["hide","finish"],setup(S,{emit:i}){const{t:o}=H(),{toast:c}=ae(),$=S,p=i,u=n(!1),m=n("female"),F=localStorage.getItem("access_token"),B=n([]),M=n([]),g=n(null),w=n(null),b=n(!1);n([]),n(),n(!0),n(null);const J=n([]),R=[{label:o("social-status.self-employed-persons-with-disabilities"),value:o("social-status.self-employed-persons-with-disabilities")},{label:o("social-status.student"),value:o("social-status.student")},{label:o("social-status.persons-on-parental-leave"),value:o("social-status.persons-on-parental-leave")},{label:o("social-status.pensioners"),value:o("social-status.pensioners")},{label:o("social-status.unemployed"),value:o("social-status.unemployed")},{label:o("social-status.working"),value:o("social-status.working")},{label:o("social-status.large-families"),value:o("social-status.large-families")}];z(()=>{D({method:"get",url:"https://api.respublica-partiyasy.kz/api/v1/parties/locations?offset=0&limit=100"}).then(t=>{t.data.data.forEach(l=>{B.value.push({label:l.name,value:l.id.toString(),childrens:l.childrens})})}).catch(t=>{console.log("err",t)}),U()});const U=()=>{D({method:"get",url:"https://api.respublica-partiyasy.kz/api/v1/admin/parties/memberships/reserved-ticket-numbers?offset=0&limit=100"}).then(t=>{t.data.forEach(l=>{J.value.push({label:l.ticket_number,value:l.id.toString()})})}).catch(t=>{console.log("err",t)})};Z(()=>g.value,()=>{M.value=[],w.value=null,b.value=!1,B.value.forEach(e=>{Number(e.value)===Number(g.value)&&(e.childrens.length||(b.value=!0),e.childrens.forEach(t=>{M.value.push({label:t.name,value:t.id.toString()})}))})});const A=({user_id:e,education:t,specialization:l,workPlace:_,post:h,streat:v,home:I,apartment:L,dateBirthday:V,pensioner:f,disabled:G,unemployed:K,onChildcareLeave:O,socialStatus:Q})=>{const X={user_id:e,birth_date:P(V).format("YYYY-MM-DD"),gender:m.value,education:t,specialty:l.length?l:null,workplace:_.length?_:null,position:h.length?h:null,social_status:Q,location_id:Number(w.value??g.value),street:v,house:I,apartment:L===""?null:L,status:"active",join_date:P().format("YYYY-MM-DD"),is_pensioner:f,is_disabled:G,is_unemployed:K,is_on_childcare_leave:O};W(X)},W=e=>{u.value=!0,D({method:"post",url:"https://api.respublica-partiyasy.kz/api/v1/admin/parties/memberships",data:e,headers:{accept:"application/json",Authorization:"Bearer "+F}}).then(l=>{console.log("response",l),c({message:"Вы успешно создали партиица",type:"success"}),p("finish"),setTimeout(()=>{p("hide")},300),u.value=!1}).catch(l=>{c({message:"Возникли ошибки при запросе"}),console.log("err",l),u.value=!1})};return(e,t)=>{const l=r("Input"),_=r("Button"),h=r("Select"),v=r("Checkbox"),I=r("Form"),L=r("Modal"),V=x("collapse");return $.show?(k(),E(L,{key:0,onHide:t[4]||(t[4]=f=>p("hide")),class:"feedbackModal",title:e.$t("party.creating-a-party-ticket")},{default:d(()=>[a(I,{onFinish:A,ignores:b.value?["locality"]:null},{default:d(()=>[s("div",se,[a(l,{name:"user_id",placeholder:"ID Пользователя",required:""}),s("div",ne,[a(l,{type:"date",name:"dateBirthday",placeholder:e.$t("formdata.date-of-birth"),required:""},null,8,["placeholder"]),a(_,{name:e.$t("status.female"),type:m.value==="female"?"default-blue":"outline-grey",onClick:t[0]||(t[0]=()=>m.value="female")},null,8,["name","type"]),a(_,{name:e.$t("status.male"),type:m.value==="male"?"default-blue":"outline-grey",onClick:t[1]||(t[1]=()=>m.value="male")},null,8,["name","type"])]),a(h,{name:"socialStatus",placeholder:e.$t("formdata.social-status"),options:R,required:""},null,8,["placeholder"]),a(h,{name:"education",placeholder:e.$t("formdata.specify-the-education"),options:[{label:e.$t("status.higher"),value:"higher_education"},{label:e.$t("status.average"),value:"secondary_special_education"}],required:""},null,8,["placeholder","options"]),a(l,{name:"specialization",placeholder:e.$t("formdata.specialization")},null,8,["placeholder"]),a(l,{name:"workPlace",placeholder:e.$t("formdata.place-of-work")},null,8,["placeholder"]),a(l,{name:"post",placeholder:e.$t("formdata.post")},null,8,["placeholder"]),a(h,{name:"region",placeholder:e.$t("formdata.specify-the-area"),options:B.value,modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=f=>g.value=f),required:""},null,8,["placeholder","options","modelValue"]),a(j,null,{default:d(()=>[b.value?T("",!0):ee((k(),q("div",ie,[a(h,{name:"locality",placeholder:e.$t("formdata.locality"),options:M.value.length?M.value:[{label:e.$t("status.first-select-an-area"),value:null}],modelValue:w.value,"onUpdate:modelValue":t[3]||(t[3]=f=>w.value=f),required:""},null,8,["placeholder","options","modelValue"])])),[[V]])]),_:1}),s("div",re,[a(l,{name:"streat",placeholder:e.$t("formdata.street-prospect-mkr")},null,8,["placeholder"]),a(l,{name:"home",placeholder:e.$t("formdata.house")},null,8,["placeholder"]),a(l,{name:"apartment",placeholder:e.$t("formdata.sq")},null,8,["placeholder"])]),s("div",null,[s("h4",de,y(e.$t("formdata.do-you-belong-to-the-category")),1),s("div",ce,[s("div",ue,[a(v,{name:"pensioner",class:"feedbackModal-checkboxList-item"},{default:d(()=>[C(y(e.$t("social-category.pensioners")),1)]),_:1}),a(v,{name:"disabled",class:"feedbackModal-checkboxList-item"},{default:d(()=>[C(y(e.$t("social-category.disabled")),1)]),_:1})]),s("div",pe,[a(v,{name:"unemployed",class:"feedbackModal-checkboxList-item"},{default:d(()=>[C(y(e.$t("social-category.unemployed")),1)]),_:1}),a(v,{name:"onChildcareLeave",class:"feedbackModal-checkboxList-item"},{default:d(()=>[C(y(e.$t("social-category.on-childcare-leave")),1)]),_:1})])])])]),a(_,{name:e.$t("button.send-a-request"),loading:u.value,htmlType:"submit",ignoreValidate:b.value?["locality"]:null},null,8,["name","loading","ignoreValidate"])]),_:1},8,["ignores"])]),_:1},8,["title"])):T("",!0)}}});const he=N(me,[["__scopeId","data-v-404d3a95"]]),_e={class:"header"},ve={class:"header-main",id:"header-main"},fe={class:"wrapper"},ge={class:"header-main-inner"},be={class:"header-main-right"},ye=Y({__name:"HeaderManager",setup(S){const i=n(!1);return(o,c)=>{const $=r("SvgIcon"),p=r("RouterLink"),u=r("Button"),m=r("LangToggle");return k(),q("header",_e,[s("div",ve,[s("div",fe,[s("div",ge,[a(p,{to:"/",class:"header-main-logo"},{default:d(()=>[a($,{class:"logo-big",name:"logo",viewboxWidth:260,viewboxHeight:49})]),_:1}),s("div",be,[s("button",{onClick:c[0]||(c[0]=()=>i.value=!0),class:"header-main-logo"},[a(u,{name:"Создать члена партии",type:"default-blue"})]),a(m),a(te)])])])]),a(he,{show:i.value,onHide:c[1]||(c[1]=()=>i.value=!1)},null,8,["show"])])}}});const ke=N(ye,[["__scopeId","data-v-33a7bf6a"]]);const $e={class:"layout"},Me={class:"layout-inner"},we={class:"layout-content",id:"layout-content"},Le={__name:"MainLayoutManager",setup(S){const{t:i}=H();z(()=>{document.body.style="height:100vh;overflow:hidden;"});const o=[{title:i("page.party-members"),link:"/manager/party-list/active?offset=0&limit=20&published=true&search="},{title:i("page.requests-for-deletion"),link:"/manager/party-resignation-list?offset=0&limit=20&published=true&search="},{title:i("page.deleted"),link:"/manager/party-list/revoked?offset=0&limit=20&published=true&search="},{title:i("page.vip-rooms"),link:"/manager/ticket-num-data-list?offset=0&limit=20&published=true&search="},{title:i("page.analytics"),link:"/manager/analytics"}];return(c,$)=>{const p=r("router-view");return k(),q("div",$e,[a(ke),s("div",Me,[a(oe,{list:o}),s("div",we,[a(p,null,{default:d(({Component:u})=>[a(j,{mode:"out-in"},{default:d(()=>[(k(),E(le(u),{key:c.$route.path}))]),_:2},1024)]),_:1})])])])}}},Be=N(Le,[["__scopeId","data-v-dcd0a7b2"]]);export{Be as default};
