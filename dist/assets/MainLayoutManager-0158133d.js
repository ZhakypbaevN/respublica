import{d as E,u as F,h as n,g as A,j as N,k as ee,r as d,l as ae,o as $,e as J,w as c,b as a,a as s,T as j,m as te,c as H,n as P,t as k,p as C,i as le,q as z,_ as Y,A as oe,f as se}from"./index-e4178685.js";import{S as ne}from"./SideBar-ffc82c7a.js";const ie={class:"feedbackModal-inputs"},re={class:"feedbackModal-inputs-gender"},de={key:0},ce={class:"feedbackModal-inputs-home"},ue={class:"feedbackModal-inputs-subtitle"},pe={class:"feedbackModal-checkboxList-block"},me={class:"feedbackModal-checkboxList"},he={class:"feedbackModal-checkboxList"},_e=E({__name:"CreatePartyModal",props:{show:{type:Boolean}},emits:["hide","finish"],setup(D,{emit:i}){const{t:o}=F(),{toast:r}=le(),M=D,p=i,u=n(!1),m=n("female"),R=localStorage.getItem("access_token"),I=n([]),w=n([]),b=n(null),L=n(null),y=n(!1);n([]),n(),n(!0),n(null);const U=n([]),W=[{label:o("social-status.self-employed-persons-with-disabilities"),value:o("social-status.self-employed-persons-with-disabilities")},{label:o("social-status.student"),value:o("social-status.student")},{label:o("social-status.persons-on-parental-leave"),value:o("social-status.persons-on-parental-leave")},{label:o("social-status.pensioners"),value:o("social-status.pensioners")},{label:o("social-status.unemployed"),value:o("social-status.unemployed")},{label:o("social-status.working"),value:o("social-status.working")},{label:o("social-status.large-families"),value:o("social-status.large-families")}];A(()=>{N({method:"get",url:"https://api.respublica-partiyasy.kz/api/v1/parties/locations?offset=0&limit=100"}).then(t=>{t.data.data.forEach(l=>{I.value.push({label:l.name,value:l.id.toString(),childrens:l.childrens})})}).catch(t=>{console.log("err",t),r({message:"Возникли ошибки при запросе"})}),G()});const G=()=>{N({method:"get",url:"https://api.respublica-partiyasy.kz/api/v1/admin/parties/memberships/reserved-ticket-numbers?offset=0&limit=100"}).then(t=>{t.data.forEach(l=>{U.value.push({label:l.ticket_number,value:l.id.toString()})})}).catch(t=>{console.log("err",t),r({message:"Возникли ошибки при запросе"})})};ee(()=>b.value,()=>{w.value=[],L.value=null,y.value=!1,I.value.forEach(e=>{Number(e.value)===Number(b.value)&&(e.childrens.length||(y.value=!0),e.childrens.forEach(t=>{w.value.push({label:t.name,value:t.id.toString()})}))})});const K=({user_id:e,education:t,specialization:l,workPlace:f,post:h,streat:v,home:V,apartment:S,dateBirthday:q,pensioner:g,disabled:Q,unemployed:X,onChildcareLeave:Z,socialStatus:x})=>{const B={user_id:e,birth_date:z(q).format("YYYY-MM-DD"),gender:m.value,education:t,specialty:l.length?l:null,workplace:f.length?f:null,position:h.length?h:null,social_status:x,location_id:Number(L.value??b.value),street:v,house:V,apartment:S===""?null:S,is_pensioner:g,is_disabled:Q,is_unemployed:X,is_on_childcare_leave:Z},T=new FormData;for(const _ in B)_==="created_at"?T.append(_,z(B[_]).format("YYYY-MM-DD[T]HH:mm:ss")):_!=="preview_image"&&B[_]&&T.append(_,B[_]);O(T)},O=e=>{u.value=!0,N({method:"post",url:"https://api.respublica-partiyasy.kz/api/v1/admin/parties/memberships",data:e,headers:{accept:"application/json",Authorization:"Bearer "+R}}).then(l=>{console.log("response",l),r({message:"Вы успешно создали партиица",type:"success"}),p("finish"),setTimeout(()=>{p("hide")},300),u.value=!1}).catch(l=>{r({message:"Возникли ошибки при запросе"}),console.log("err",l),u.value=!1})};return(e,t)=>{const l=d("Input"),f=d("Button"),h=d("Select"),v=d("Checkbox"),V=d("Form"),S=d("Modal"),q=ae("collapse");return M.show?($(),J(S,{key:0,onHide:t[4]||(t[4]=g=>p("hide")),class:"feedbackModal",title:e.$t("party.creating-a-party-ticket")},{default:c(()=>[a(V,{onFinish:K,ignores:y.value?["locality"]:null},{default:c(()=>[s("div",ie,[a(l,{name:"user_id",placeholder:"ID Пользователя",required:""}),s("div",re,[a(l,{type:"date",name:"dateBirthday",placeholder:e.$t("formdata.date-of-birth"),required:""},null,8,["placeholder"]),a(f,{name:e.$t("status.female"),type:m.value==="female"?"default-blue":"outline-grey",onClick:t[0]||(t[0]=()=>m.value="female")},null,8,["name","type"]),a(f,{name:e.$t("status.male"),type:m.value==="male"?"default-blue":"outline-grey",onClick:t[1]||(t[1]=()=>m.value="male")},null,8,["name","type"])]),a(h,{name:"socialStatus",placeholder:e.$t("formdata.social-status"),options:W,required:""},null,8,["placeholder"]),a(h,{name:"education",placeholder:e.$t("formdata.specify-the-education"),options:[{label:e.$t("status.higher"),value:"higher_education"},{label:e.$t("status.average"),value:"secondary_special_education"}],required:""},null,8,["placeholder","options"]),a(l,{name:"specialization",placeholder:e.$t("formdata.specialization")},null,8,["placeholder"]),a(l,{name:"workPlace",placeholder:e.$t("formdata.place-of-work")},null,8,["placeholder"]),a(l,{name:"post",placeholder:e.$t("formdata.post")},null,8,["placeholder"]),a(h,{name:"region",placeholder:e.$t("formdata.specify-the-area"),options:I.value,modelValue:b.value,"onUpdate:modelValue":t[2]||(t[2]=g=>b.value=g),required:""},null,8,["placeholder","options","modelValue"]),a(j,null,{default:c(()=>[y.value?P("",!0):te(($(),H("div",de,[a(h,{name:"locality",placeholder:e.$t("formdata.locality"),options:w.value.length?w.value:[{label:e.$t("status.first-select-an-area"),value:null}],modelValue:L.value,"onUpdate:modelValue":t[3]||(t[3]=g=>L.value=g),required:""},null,8,["placeholder","options","modelValue"])])),[[q]])]),_:1}),s("div",ce,[a(l,{name:"streat",placeholder:e.$t("formdata.street-prospect-mkr")},null,8,["placeholder"]),a(l,{name:"home",placeholder:e.$t("formdata.house")},null,8,["placeholder"]),a(l,{name:"apartment",placeholder:e.$t("formdata.sq")},null,8,["placeholder"])]),s("div",null,[s("h4",ue,k(e.$t("formdata.do-you-belong-to-the-category")),1),s("div",pe,[s("div",me,[a(v,{name:"pensioner",class:"feedbackModal-checkboxList-item"},{default:c(()=>[C(k(e.$t("social-category.pensioners")),1)]),_:1}),a(v,{name:"disabled",class:"feedbackModal-checkboxList-item"},{default:c(()=>[C(k(e.$t("social-category.disabled")),1)]),_:1})]),s("div",he,[a(v,{name:"unemployed",class:"feedbackModal-checkboxList-item"},{default:c(()=>[C(k(e.$t("social-category.unemployed")),1)]),_:1}),a(v,{name:"onChildcareLeave",class:"feedbackModal-checkboxList-item"},{default:c(()=>[C(k(e.$t("social-category.on-childcare-leave")),1)]),_:1})])])])]),a(f,{name:e.$t("button.send-a-request"),loading:u.value,htmlType:"submit",ignoreValidate:y.value?["locality"]:null},null,8,["name","loading","ignoreValidate"])]),_:1},8,["ignores"])]),_:1},8,["title"])):P("",!0)}}});const fe=Y(_e,[["__scopeId","data-v-21f5713f"]]),ve={class:"header"},ge={class:"header-main",id:"header-main"},be={class:"wrapper"},ye={class:"header-main-inner"},ke={class:"header-main-right"},$e=E({__name:"HeaderManager",setup(D){const i=n(!1);return(o,r)=>{const M=d("SvgIcon"),p=d("RouterLink"),u=d("Button"),m=d("LangToggle");return $(),H("header",ve,[s("div",ge,[s("div",be,[s("div",ye,[a(p,{to:"/",class:"header-main-logo"},{default:c(()=>[a(M,{class:"logo-big",name:"logo",viewboxWidth:260,viewboxHeight:49})]),_:1}),s("div",ke,[s("button",{onClick:r[0]||(r[0]=()=>i.value=!0),class:"header-main-logo"},[a(u,{name:"Создать члена партии",type:"default-blue"})]),a(m),a(oe)])])])]),a(fe,{show:i.value,onHide:r[1]||(r[1]=()=>i.value=!1)},null,8,["show"])])}}});const Me=Y($e,[["__scopeId","data-v-dbde8ff9"]]);const we={class:"layout"},Le={class:"layout-inner"},Se={class:"layout-content",id:"layout-content"},Be={__name:"MainLayoutManager",setup(D){const{t:i}=F();A(()=>{document.body.style="height:100vh;overflow:hidden;"});const o=[{title:i("page.party-members"),link:"/manager/party-list/active?offset=0&limit=20&published=true&search="},{title:i("page.requests-for-deletion"),link:"/manager/party-resignation-list?offset=0&limit=20&published=true&search="},{title:i("page.deleted"),link:"/manager/party-list/revoked?offset=0&limit=20&published=true&search="},{title:i("page.vip-rooms"),link:"/manager/ticket-num-data-list?offset=0&limit=20&published=true&search="},{title:i("page.analytics"),link:"/manager/analytics"}];return(r,M)=>{const p=d("router-view");return $(),H("div",we,[a(Me),s("div",Le,[a(ne,{list:o}),s("div",Se,[a(p,null,{default:c(({Component:u})=>[a(j,{mode:"out-in"},{default:c(()=>[($(),J(se(u),{key:r.$route.path}))]),_:2},1024)]),_:1})])])])}}},Ie=Y(Be,[["__scopeId","data-v-dcd0a7b2"]]);export{Ie as default};
