import{d as A,u as J,h as i,g as Y,j as S,k as ae,r as c,l as te,o as $,e as F,w as u,b as t,a as o,m as k,t as _,n as le,T as j,p as se,c as T,q as U,i as oe,s as ne,_ as D,A as ie,f as re}from"./index-81eeba45.js";import{S as de}from"./SideBar-aa0e6da5.js";const ue={class:"feedbackModal-inputs"},ce={class:"feedbackModal-inputs-gender"},pe={key:0},me={class:"feedbackModal-inputs-home"},he={class:"feedbackModal-inputs-subtitle"},ve={class:"feedbackModal-checkboxList-block"},fe={class:"feedbackModal-checkboxList"},_e={class:"feedbackModal-checkboxList"},ge=A({__name:"CreatePartyModal",props:{show:{type:Boolean}},emits:["hide","finish"],setup(C,{emit:d}){const{t:s}=J(),{toast:n}=oe(),M=C,v=d,m=i(!1),f=i("female"),R=localStorage.getItem("access_token"),N=i([]),w=i([]),g=i(null),L=i(null),b=i(!1),z=i([]),E=i(),B=i(!0),H=i(null),P=i([]),G=[{label:s("social-status.self-employed-persons-with-disabilities"),value:s("social-status.self-employed-persons-with-disabilities")},{label:s("social-status.student"),value:s("social-status.student")},{label:s("social-status.persons-on-parental-leave"),value:s("social-status.persons-on-parental-leave")},{label:s("social-status.pensioners"),value:s("social-status.pensioners")},{label:s("social-status.unemployed"),value:s("social-status.unemployed")},{label:s("social-status.working"),value:s("social-status.working")},{label:s("social-status.large-families"),value:s("social-status.large-families")}];Y(()=>{S({method:"get",url:"https://api.respublica-partiyasy.kz/api/v1/parties/locations?offset=0&limit=100"}).then(a=>{a.data.forEach(l=>{N.value.push({label:l.name,value:l.id.toString(),childrens:l.childrens})})}).catch(a=>{console.log("err",a),n({message:"Возникли ошибки при запросе"})}),O(),W()});const O=()=>{S({method:"get",url:"https://api.respublica-partiyasy.kz/api/v1/admin/users?offset=0&limit=100"}).then(a=>{a.data.forEach(l=>{z.value.push({label:`${l.first_name} ${l.last_name} ${l.middle_name??""}`,value:JSON.stringify(l)})})}).catch(a=>{console.log("err",a),n({message:"Возникли ошибки при запросе"})})},W=()=>{S({method:"get",url:"https://api.respublica-partiyasy.kz/api/v1/admin/parties/memberships/reserved-ticket-numbers?offset=0&limit=100"}).then(a=>{a.data.forEach(l=>{P.value.push({label:l.ticket_number,value:l.id.toString()})})}).catch(a=>{console.log("err",a),n({message:"Возникли ошибки при запросе"})})};ae(()=>g.value,()=>{w.value=[],L.value=null,b.value=!1,N.value.forEach(e=>{Number(e.value)===Number(g.value)&&(e.childrens.length||(b.value=!0),e.childrens.forEach(a=>{w.value.push({label:a.name,value:a.id.toString()})}))})});const K=({education:e,specialization:a,workPlace:l,post:h,streat:p,home:y,apartment:V,dateBirthday:q,pensioner:I,disabled:r,unemployed:X,onChildcareLeave:Z,socialStatus:x})=>{const ee={birth_date:ne(q).format("YYYY-MM-DD"),gender:f.value,education:e,specialty:a.length?a:null,workplace:l.length?l:null,position:h.length?h:null,social_status:x,location_id:Number(L.value??g.value),street:p,house:y,apartment:V===""?null:V,is_pensioner:I,is_disabled:r,is_unemployed:X,is_on_childcare_leave:Z};Q(ee)},Q=e=>{m.value=!0,S({method:"post",url:"https://api.respublica-partiyasy.kz/api/v1/parties/memberships",data:e,headers:{accept:"application/json",Authorization:"Bearer "+R}}).then(l=>{console.log("response",l),n({message:"Вы успешно создали партиица",type:"success"}),v("finish"),setTimeout(()=>{v("hide")},300),m.value=!1}).catch(l=>{l.response.data.detail==="Duplicate membership is not allowed."?n({message:"Возникли ошибки при запросе"}):l.response.data.detail==="Age under 18 is not allowed."?n({message:"Проживание в возрасте до 18 лет не допускается"}):n({message:"Возникли ошибки при запросе"}),console.log("err",l),m.value=!1})};return(e,a)=>{const l=c("Select"),h=c("Checkbox"),p=c("Input"),y=c("Button"),V=c("Form"),q=c("Modal"),I=te("collapse");return M.show?($(),F(q,{key:0,onHide:a[7]||(a[7]=r=>v("hide")),class:"feedbackModal",title:e.$t("party.creating-a-party-ticket")},{default:u(()=>[t(V,{onFinish:K,ignores:b.value?["locality"]:null},{default:u(()=>[o("div",ue,[t(l,{name:"user-data",placeholder:e.$t("formdata.select-a-user"),options:z.value,modelValue:E.value,"onUpdate:modelValue":a[0]||(a[0]=r=>E.value=r),required:""},null,8,["placeholder","options","modelValue"]),t(h,{name:"confirm-3",class:"feedbackModal-inputs-customTicketNum",modelValue:B.value,"onUpdate:modelValue":a[1]||(a[1]=r=>B.value=r)},{default:u(()=>[k(_(e.$t("party.automatic-number-generation")),1)]),_:1},8,["modelValue"]),o("div",{class:le(["feedbackModal-inputs-ticketNumSelect",{disabled:B.value}])},[t(l,{name:"ticket-num",placeholder:e.$t("formdata.specify-the-ticket-number"),options:P.value,modelValue:H.value,"onUpdate:modelValue":a[2]||(a[2]=r=>H.value=r),required:""},null,8,["placeholder","options","modelValue"])],2),o("div",ce,[t(p,{type:"date",name:"dateBirthday",placeholder:e.$t("formdata.date-of-birth"),required:""},null,8,["placeholder"]),t(y,{name:e.$t("status.female"),type:f.value==="female"?"default-blue":"outline-grey",onClick:a[3]||(a[3]=()=>f.value="female")},null,8,["name","type"]),t(y,{name:e.$t("status.male"),type:f.value==="male"?"default-blue":"outline-grey",onClick:a[4]||(a[4]=()=>f.value="male")},null,8,["name","type"])]),t(l,{name:"socialStatus",placeholder:e.$t("formdata.social-status"),options:G,required:""},null,8,["placeholder"]),t(l,{name:"education",placeholder:e.$t("formdata.specify-the-education"),options:[{label:e.$t("status.higher"),value:"higher_education"},{label:e.$t("status.average"),value:"secondary_special_education"}],required:""},null,8,["placeholder","options"]),t(p,{name:"specialization",placeholder:e.$t("formdata.specialization")},null,8,["placeholder"]),t(p,{name:"workPlace",placeholder:e.$t("formdata.place-of-work")},null,8,["placeholder"]),t(p,{name:"post",placeholder:e.$t("formdata.post")},null,8,["placeholder"]),t(l,{name:"region",placeholder:e.$t("formdata.specify-the-area"),options:N.value,modelValue:g.value,"onUpdate:modelValue":a[5]||(a[5]=r=>g.value=r),required:""},null,8,["placeholder","options","modelValue"]),t(j,null,{default:u(()=>[b.value?U("",!0):se(($(),T("div",pe,[t(l,{name:"locality",placeholder:e.$t("formdata.locality"),options:w.value.length?w.value:[{label:e.$t("status.first-select-an-area"),value:null}],modelValue:L.value,"onUpdate:modelValue":a[6]||(a[6]=r=>L.value=r),required:""},null,8,["placeholder","options","modelValue"])])),[[I]])]),_:1}),o("div",me,[t(p,{name:"streat",placeholder:e.$t("formdata.street-prospect-mkr")},null,8,["placeholder"]),t(p,{name:"home",placeholder:e.$t("formdata.house")},null,8,["placeholder"]),t(p,{name:"apartment",placeholder:e.$t("formdata.sq")},null,8,["placeholder"])]),o("div",null,[o("h4",he,_(e.$t("formdata.do-you-belong-to-the-category")),1),o("div",ve,[o("div",fe,[t(h,{name:"pensioner",class:"feedbackModal-checkboxList-item"},{default:u(()=>[k(_(e.$t("formdata.pensioners")),1)]),_:1}),t(h,{name:"disabled",class:"feedbackModal-checkboxList-item"},{default:u(()=>[k(_(e.$t("formdata.disabled")),1)]),_:1})]),o("div",_e,[t(h,{name:"unemployed",class:"feedbackModal-checkboxList-item"},{default:u(()=>[k(_(e.$t("formdata.unemployed")),1)]),_:1}),t(h,{name:"onChildcareLeave",class:"feedbackModal-checkboxList-item"},{default:u(()=>[k(_(e.$t("formdata.on-childcare-leave")),1)]),_:1})])])])]),t(y,{name:e.$t("button.send-a-request"),loading:m.value,htmlType:"submit",ignoreValidate:b.value?["locality"]:null},null,8,["name","loading","ignoreValidate"])]),_:1},8,["ignores"])]),_:1},8,["title"])):U("",!0)}}});const be=D(ge,[["__scopeId","data-v-4e8a96a7"]]),ye={class:"header"},ke={class:"header-main",id:"header-main"},$e={class:"wrapper"},Me={class:"header-main-inner"},we={class:"header-main-right"},Le=A({__name:"HeaderManager",setup(C){const d=i(!1);return(s,n)=>{const M=c("SvgIcon"),v=c("RouterLink"),m=c("Button"),f=c("LangToggle");return $(),T("header",ye,[o("div",ke,[o("div",$e,[o("div",Me,[t(v,{to:"/",class:"header-main-logo"},{default:u(()=>[t(M,{class:"logo-big",name:"logo",viewboxWidth:260,viewboxHeight:49})]),_:1}),o("div",we,[o("button",{onClick:n[0]||(n[0]=()=>d.value=!0),class:"header-main-logo"},[t(m,{name:"Создать члена партии",type:"default-blue"})]),t(f),t(ie)])])])]),t(be,{show:d.value,onHide:n[1]||(n[1]=()=>d.value=!1)},null,8,["show"])])}}});const Ve=D(Le,[["__scopeId","data-v-dbde8ff9"]]);const Se={class:"layout"},Ce={class:"layout-inner"},Ne={class:"layout-content",id:"layout-content"},Be={__name:"MainLayoutManager",setup(C){const{t:d}=J();Y(()=>{document.body.style="height:100vh;overflow:hidden;"});const s=[{title:d("page.party-members"),link:"/manager/party-list/active?offset=0&limit=20&published=true&search="},{title:d("page.requests-for-deletion"),link:"/manager/party-resignation-list?offset=0&limit=20&published=true&search="},{title:d("page.deleted"),link:"/manager/party-list/revoked?offset=0&limit=20&published=true&search="},{title:d("page.vip-rooms"),link:"/manager/ticket-num-data-list?offset=0&limit=20&published=true&search="},{title:d("page.analytics"),link:"/manager/analytics"}];return(n,M)=>{const v=c("router-view");return $(),T("div",Se,[t(Ve),o("div",Ce,[t(de,{list:s}),o("div",Ne,[t(v,null,{default:u(({Component:m})=>[t(j,{mode:"out-in"},{default:u(()=>[($(),F(re(m),{key:n.$route.path}))]),_:2},1024)]),_:1})])])])}}},Te=D(Be,[["__scopeId","data-v-dcd0a7b2"]]);export{Te as default};
